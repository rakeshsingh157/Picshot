<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link rel="stylesheet" href="chat-style.css">

<body>
      <aside id="sidebar">
        <h1>Chat</h1>
        <div id="user-list">
            h

           
            ?>
        </div>
    </aside>

    <div id="chat-container">
        <div id="chat-header">
            <?php
            $receiverUsername = $_GET['username'] ?? '';
            if ($receiverUsername) {
                $receiverInfo = getUserInfoByUsername($conn, $receiverUsername);
                if ($receiverInfo) {
                    $profilePhotoUrl = htmlspecialchars($receiverInfo['profile_photo']);
                    echo "<img src='$profilePhotoUrl' alt='Profile Photo'>";
                    echo "<h2>" . htmlspecialchars($receiverUsername) . "</h2>";
                } else {
                    echo "<p>User not found.</p>";
                }
            }
            ?>
        </div>

        <div id="message-area">
            <center><p>Loading messages...</p></center>
        </div>

        <div id="input-area">
            <input type="text" id="message-input" placeholder="Type your message...">
            <button id="send-button" onclick="sendMessage()">Send</button>
        </div>
        <input type="hidden" id="receiver-username" value="<?= htmlspecialchars($_GET['username'] ?? '') ?>">
    </div>

</body>
</html>